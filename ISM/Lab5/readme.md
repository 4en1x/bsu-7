# lab5

Система массового обслуживания **GPSS**

## 47. Моделирование работы продовольственного магазина.

### Исходные данные:

Небольшой продовольственный магазин  состоит из 4-х прилавков и одной кассы на выходе из магазина. 
Покупатели приходят в магазин, образуя пуассоновский поток, составляющий λ c. 
Войдя в магазин, каждый покупатель берет корзинку и может обойти один или несколько прилавков, отбирая продукты.
Вероятность обхода конкретного прилавка указана в следующей таблице:

| Прилавок | Вероятность покупки | Время обхода прилавка |
|:--------:|:-------------------:|:---------------------:|
|     1    |         0.65        |        180+-60с       |
|     2    |         0.85        |        160+-30с       |
|     3    |         0.70        |        100+-25с       |
|     4    |         0.90        |        50+-15с        |


После того как товар отобран, покупатель становится в конец очереди к кассе. 
Время обслуживания покупателя в кассе прямо пропорционально числу сделанных покупок, на одну покупку уходит время t.

### Цель:

Разработать **GPSSV**-модель, имитирующую работу магазина в течение 8 ч. Оценить число покупателей, стоящих в очереди к кассе.

### Первоначальный перечень экспериментов:

- `λ = 95`
- `t = 3`

## Решение:

> source code of [`lab5.gps`](https://github.com/4en1x/bsu-7/tree/master/ISM/lab5/task.gps)

```asm
input_flow_mean VARIABLE 95; lambda
time_shop EQU 3.0; t

POISS	FUNCTION	RN1,C24 (Poisson Process)
0.0,0.0/0.1,0.104/0.2,0.222/0.3,0.355/0.4,0.509/0.5,0.69/
0.6,0.915/0.7,1.2/0.75,1.38/0.8,1.6/0.84,1.83/0.88,7.12/
0.9,2.3/0.92,2.52/0.94,2.81/0.95,2.99/0.96,3.2/0.97,3.5/
0.98,3.9/0.99,4.6/0.995,5.3/0.998,6.2/0.999,7/0.9997,8

; ---------------------------------------------------------------

	GENERATE V$input_flow_mean,FN$POISS 				; Input flow: lambda*PoissonDistr()
	
	ASSIGN	NZap,0
	TRANSFER  .65,METKA1,PURCHASE1
PURCHASE1	ASSIGN	NZap+,time_shop
	ADVANCE 180,60
METKA1	TRANSFER  .85,METKA2,PURCHASE2
PURCHASE2	ASSIGN	NZap+,time_shop
	ADVANCE 160,30
METKA2	TRANSFER  .70,METKA3,PURCHASE3
PURCHASE3	ASSIGN	NZap+,time_shop
	ADVANCE 100,25
METKA3	TRANSFER  .90,METKA4,PURCHASE4
PURCHASE4	ASSIGN	NZap+,time_shop
	ADVANCE 50,15
METKA4	QUEUE	TILL
	SEIZE	TILL
	DEPART	TILL

	ADVANCE	P$NZap
	RELEASE	TILL
	
	TERMINATE		
; ---------------------------------------------------------------

	GENERATE 28800				; 8 hr = 8*60*60 = 28800 s
	TERMINATE 1
	START 1
```
